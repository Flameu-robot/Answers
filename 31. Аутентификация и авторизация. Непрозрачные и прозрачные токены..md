
## 1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Authentication)**

- **–ß—Ç–æ —ç—Ç–æ?** –≠—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è **–∫—Ç–æ —Ç—ã –µ—Å—Ç—å** .
- –ü—Ä–∏–º–µ—Ä: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å ‚Üí —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ–≥–æ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å ‚Üí –µ—Å–ª–∏ –≤–µ—Ä–Ω–æ, —Å–æ–∑–¥–∞—ë—Ç—Å—è "—É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ" (identity).

### –í ASP.NET Core:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `UseAuthentication()` –≤ middleware pipeline.
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ö–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
    - Cookie-based (–¥–ª—è MVC –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π)
    - JWT Bearer (–¥–ª—è API)
    - OAuth / OpenID Connect
    - Windows Authentication
    - ...

–ö—É–∫–∏:
```c#
services.AddAuthentication(CookieAuthenticationDefaults.AuthenticationScheme)
        .AddCookie();
```
–¢–æ–∫–µ–Ω:
```c#
services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
        .AddJwtBearer(options => { ... });
```
## 2. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Authorization)**

- **–ß—Ç–æ —ç—Ç–æ?** –≠—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è **—á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å –¥–µ–ª–∞—Ç—å** .
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

### –í ASP.NET Core:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `UseAuthorization()` –≤ middleware pipeline.
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
    - `[Authorize]` –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö/–º–µ—Ç–æ–¥–∞—Ö
    - –ü–æ–ª–∏—Ç–∏–∫–∏ (Policies), —Ä–æ–ª–∏, claims

–ü—Ä–∏–º–µ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
```c#
[Authorize(Roles = "Admin")]
public IActionResult AdminPanel()
{
    return View();
}
```

# üóùÔ∏è –¢–∏–ø—ã —Ç–æ–∫–µ–Ω–æ–≤: –ù–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ vs –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ

–¢–æ–∫–µ–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ **API-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** , –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–æ–±–∏–ª—å–Ω—ã–º–∏ –∏ SPA-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏.

## 1. **–ù–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç–æ–∫–µ–Ω (Opaque Token)**

### –ß—Ç–æ —ç—Ç–æ?

- –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, GUID), –∫–æ—Ç–æ—Ä–∞—è **–Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã—Ö —Å–∞–º–∞ –ø–æ —Å–µ–±–µ** .
- –°–µ—Ä–≤–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–µ–π –≤ —Å–≤–æ–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫—ç—à–µ (Redis).
- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç–∞–∫–æ–π —Ç–æ–∫–µ–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å).
2. –°–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É ‚Äî —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `abc123xyz`) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ—ë –≤ –ë–î –≤–º–µ—Å—Ç–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
3. –ö–ª–∏–µ–Ω—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–ø—Ä–æ—Å–∞: `Authorization: Bearer abc123xyz`.
4. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å ‚Üí –∏—â–µ—Ç —Ç–æ–∫–µ–Ω –≤ –ë–î ‚Üí –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
   
## 2. **JWT (JSON Web Token)** ‚Äî –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç–æ–∫–µ–Ω

### –ß—Ç–æ —ç—Ç–æ?

- –≠—Ç–æ **—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω** , –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç **–≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è** .
- –û–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —á–∞—Å—Ç–µ–π:
    - **Header** ‚Äî —Ç–∏–ø —Ç–æ–∫–µ–Ω–∞ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    - **Payload** ‚Äî –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (claims)
    - **Signature** ‚Äî —Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏

–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
```c#
{
  "sub": "1234567890",
  "name": "John Doe",
  "role": "User",
  "exp": 1516239022
}
```

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫–æ–π —Ç–æ–∫–µ–Ω
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê–≤—Ç–æ—Ä–∏–∑–∏—Ä—É–µ—Ç—Å—è -> –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω -> —Ç–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ = –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –∫–∞–∫ —Ö–æ—á–µ—à—å)))

–∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–æ–∫–µ–Ω(–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π): —Ç–æ—á–∫–∞ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –µ—Å–ª–∏ —á—Ç–æ –¥–ª—è —Ç—Ä—ë—Ö –ø—É–Ω–∫—Ç–æ–≤
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTYwNTAwMDkwMCwiZXhwIjoxNjA1MTAwNTAwfQ.S28V-tWd-X8j-sY1-ZfL_jL-Zk-lE_d
- **Header:**
    
    –≠—Ç–æ –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–ø–µ —Ç–æ–∫–µ–Ω–∞ (JWT) –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–º –∞–ª–≥–æ—Ä–∏—Ç–º–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, HS256, RS256).
    
- **Payload:**
    
    –≠—Ç–æ –≤—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞—Ç—å.¬†–ù–∞–ø—Ä–∏–º–µ—Ä, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ä–æ–ª—å, –¥–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ.
    
- **Signature:**
    
    –≠—Ç–æ —Ç—Ä–µ—Ç—å—è —á–∞—Å—Ç—å —Ç–æ–∫–µ–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–∞.¬†–û–Ω–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ header –∏ payload.